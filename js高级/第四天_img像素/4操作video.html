<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
	</head>
	<body>
		<video autoplay="autoplay" src="img/videoviewdemo.mp4" id="videos">您的浏览器版本太低，不支持video标签</video>
		<canvas id="myCanVas" width="1200" height="1800">啥？这个也不支持？</canvas>
		<script type="text/javascript">
			var myCan=document.getElementById("myCanVas");
			var can=myCan.getContext("2d");
			var video=document.getElementById("videos");
			
			function draw(){
			//加载完成
			video.oncanplay=function(){
				can.drawImage(video,0,0);
				
				}
			}

//         video.oncanplay=function(){
//			setInterval(function(){
//				can.drawImage(video,0,0);
//				
//			},100);
//			}
           
           
           
           //处理美一张图片
           function check(){
           	can.drawImage(video,0,0);
           	var imageData=can.getImageData(0,0,480,360);
				var ptxArr=imageData.data;
				for (var i=0;i<ptxArr.length;i+=4) {
					var r=ptxArr[i];
					var g=ptxArr[i+1];
					var b=ptxArr[i+2];
                    ptxArr[i]=(r+g+b)/3;
                    ptxArr[i+1]=(r+g+b)/3;
                    ptxArr[i+2]=(r+g+b)/3;

	            }
				//处理图片上的信息
				can.putImageData(imageData,0,0,240,0,480,360);
           }
           setInterval(function(){
           	draw();
           	check();
           },10);
           

           
           
		</script>
	</body>
</html>
